{"ast":null,"code":"import _regeneratorRuntime from\"/Users/derek/Desktop/project/JoinMe-fe-DerekLarm/my-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _objectSpread from\"/Users/derek/Desktop/project/JoinMe-fe-DerekLarm/my-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _asyncToGenerator from\"/Users/derek/Desktop/project/JoinMe-fe-DerekLarm/my-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/derek/Desktop/project/JoinMe-fe-DerekLarm/my-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import{ToastContainer}from\"react-toastify\";// import Home from \"./views/Home\";\n// import { BrowserRouter as Router, Switch, Route } from \"react-router-dom\";\nimport{Map,Nav}from\"./components/index\";import\"rheostat/initialize\";import\"rheostat/css/rheostat.css\";// import axios from \"axios\";\nimport\"react-toastify/dist/ReactToastify.css\";import\"./App.css\";function App(props){var _useState=useState({isAuthenticated:false}),_useState2=_slicedToArray(_useState,2),user=_useState2[0],setUser=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),day=_useState4[0],setDay=_useState4[1];useEffect(function(){var fetchUser=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var token,res,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:token=localStorage.getItem(\"token\");console.log(token);if(token){_context.next=5;break;}console.log(\"no token provided\");return _context.abrupt(\"return\");case 5:_context.next=7;return fetch(\"http://localhost:5000/users/me\",{method:\"GET\",headers:{\"Content-Type\":\"application/json\",\"x-auth-token\":\"\".concat(token)}});case 7:res=_context.sent;if(!(res.status===200)){_context.next=15;break;}_context.next=11;return res.json();case 11:data=_context.sent;setUser(_objectSpread(_objectSpread({},data.user),{},{isAuthenticated:true}));_context.next=17;break;case 15:setUser({isAuthenticated:false});localStorage.removeItem(\"token\");case 17:case\"end\":return _context.stop();}}},_callee);}));return function fetchUser(){return _ref.apply(this,arguments);};}();fetchUser();},[]);console.log(user);return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(ToastContainer,null),/*#__PURE__*/React.createElement(Nav,{setUser:setUser,user:user}),/*#__PURE__*/React.createElement(Map,{user:user,setDay:setDay,day:day}));}export default App;","map":{"version":3,"sources":["/Users/derek/Desktop/project/JoinMe-fe-DerekLarm/my-app/src/App.js"],"names":["React","useState","useEffect","ToastContainer","Map","Nav","App","props","isAuthenticated","user","setUser","day","setDay","fetchUser","token","localStorage","getItem","console","log","fetch","method","headers","res","status","json","data","removeItem"],"mappings":"orBAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA,OAASC,cAAT,KAA+B,gBAA/B,CACA;AACA;AACA,OAASC,GAAT,CAAcC,GAAd,KAAyB,oBAAzB,CACA,MAAO,qBAAP,CACA,MAAO,2BAAP,CACA;AACA,MAAO,uCAAP,CACA,MAAO,WAAP,CAEA,QAASC,CAAAA,GAAT,CAAaC,KAAb,CAAoB,eACMN,QAAQ,CAAC,CAAEO,eAAe,CAAE,KAAnB,CAAD,CADd,wCACXC,IADW,eACLC,OADK,8BAEIT,QAAQ,CAAC,EAAD,CAFZ,yCAEXU,GAFW,eAENC,MAFM,eAIlBV,SAAS,CAAC,UAAM,CACd,GAAMW,CAAAA,SAAS,0FAAG,sJACVC,KADU,CACFC,YAAY,CAACC,OAAb,CAAqB,OAArB,CADE,CAEhBC,OAAO,CAACC,GAAR,CAAYJ,KAAZ,EAFgB,GAGXA,KAHW,yBAIdG,OAAO,CAACC,GAAR,CAAY,mBAAZ,EAJc,8DAOEC,CAAAA,KAAK,CAAC,gCAAD,CAAmC,CACxDC,MAAM,CAAE,KADgD,CAExDC,OAAO,CAAE,CACP,eAAgB,kBADT,CAEP,yBAAmBP,KAAnB,CAFO,CAF+C,CAAnC,CAPP,QAOVQ,GAPU,oBAcZA,GAAG,CAACC,MAAJ,GAAe,GAdH,kDAeKD,CAAAA,GAAG,CAACE,IAAJ,EAfL,SAeRC,IAfQ,eAgBdf,OAAO,gCAAMe,IAAI,CAAChB,IAAX,MAAiBD,eAAe,CAAE,IAAlC,GAAP,CAhBc,+BAkBdE,OAAO,CAAC,CAAEF,eAAe,CAAE,KAAnB,CAAD,CAAP,CACAO,YAAY,CAACW,UAAb,CAAwB,OAAxB,EAnBc,uDAAH,kBAATb,CAAAA,SAAS,0CAAf,CAsBAA,SAAS,GACV,CAxBQ,CAwBN,EAxBM,CAAT,CA0BAI,OAAO,CAACC,GAAR,CAAYT,IAAZ,EACA,mBACE,4CACE,oBAAC,cAAD,MADF,cAEE,oBAAC,GAAD,EAAK,OAAO,CAAEC,OAAd,CAAuB,IAAI,CAAED,IAA7B,EAFF,cAGE,oBAAC,GAAD,EAAK,IAAI,CAAEA,IAAX,CAAiB,MAAM,CAAEG,MAAzB,CAAiC,GAAG,CAAED,GAAtC,EAHF,CADF,CAOD,CAED,cAAeL,CAAAA,GAAf","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { ToastContainer } from \"react-toastify\";\n// import Home from \"./views/Home\";\n// import { BrowserRouter as Router, Switch, Route } from \"react-router-dom\";\nimport { Map, Nav } from \"./components/index\";\nimport \"rheostat/initialize\";\nimport \"rheostat/css/rheostat.css\";\n// import axios from \"axios\";\nimport \"react-toastify/dist/ReactToastify.css\";\nimport \"./App.css\";\n\nfunction App(props) {\n  const [user, setUser] = useState({ isAuthenticated: false });\n  const [day, setDay] = useState(\"\")\n\n  useEffect(() => {\n    const fetchUser = async () => {\n      const token = localStorage.getItem(\"token\");\n      console.log(token);\n      if (!token) {\n        console.log(\"no token provided\");\n        return;\n      }\n      const res = await fetch(\"http://localhost:5000/users/me\", {\n        method: \"GET\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          \"x-auth-token\": `${token}`,\n        },\n      });\n      if (res.status === 200) {\n        const data = await res.json();\n        setUser({ ...data.user, isAuthenticated: true });\n      } else {\n        setUser({ isAuthenticated: false });\n        localStorage.removeItem(\"token\");\n      }\n    };\n    fetchUser();\n  }, []);\n\n  console.log(user);\n  return (\n    <div>\n      <ToastContainer />\n      <Nav setUser={setUser} user={user} />\n      <Map user={user} setDay={setDay} day={day}/>\n    </div>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}