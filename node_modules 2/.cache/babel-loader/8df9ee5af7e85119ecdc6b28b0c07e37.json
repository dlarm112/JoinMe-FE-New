{"ast":null,"code":"var _jsxFileName = \"/Users/derek/Desktop/project/JoinMe-fe-DerekLarm/src/components/Nav.js\";\nimport React, { useState } from \"react\";\nimport { Navbar, Button, Modal, Form, Badge } from \"react-bootstrap\";\n\nconst Joi = require(\"joi-browser\");\n\nexport default function Nav(props) {\n  const [show, setShow] = useState(null);\n  const [showRegister, setShowRegister] = useState(null);\n  const [email, setEmail] = useState(\"\");\n  const [name, setName] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const schema = {\n    email: Joi.string().required().email().label(\"Email\"),\n    password: Joi.string().required().min(5).label(\"Password\"),\n    name: Joi.string().required().min(5).label(\"Username\")\n  };\n\n  const loginShow = async e => {\n    setShow(e);\n  };\n\n  const registerShow = e => {\n    setShowRegister(e);\n  };\n\n  const loginFunc = async e => {\n    e.preventDefault();\n\n    try {\n      const loginData = {\n        email,\n        password\n      };\n      const res = await fetch(`${process.env.REACT_APP_API_URL}/auth`, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify(loginData)\n      });\n      const data = await res.json();\n      localStorage.setItem(\"token\", data.token);\n      props.setUser({ ...data.user,\n        isAuthenticated: true\n      });\n    } catch (err) {\n      console.log(err);\n    }\n\n    setShow(false);\n  };\n\n  const registerFunc = async e => {\n    e.preventDefault();\n\n    try {\n      const userData = {\n        name,\n        email,\n        password\n      };\n      const loginData = {\n        email,\n        password\n      };\n      console.log(userData);\n      const newRegister = await fetch(`${process.env.REACT_APP_API_URL}/users`, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify(userData)\n      });\n      const res = await fetch(`${process.env.REACT_APP_API_URL}/auth`, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify(loginData)\n      });\n      const data = await res.json();\n      localStorage.setItem(\"token\", data.token);\n      props.setUser({ ...data.user,\n        isAuthenticated: true\n      });\n      registerShow(false);\n    } catch (err) {\n      console.log(err);\n    }\n  };\n\n  const logOut = () => {\n    props.setUser({\n      isAuthenticated: false\n    });\n    localStorage.removeItem(\"token\");\n    window.location.reload(true);\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Navbar, {\n    className: \"navBar\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Navbar.Brand, {\n    className: \"navText\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 11\n    }\n  }, \"JoinMe\", /*#__PURE__*/React.createElement(\"i\", {\n    class: \"fas fa-users\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 19\n    }\n  })), !props.user.isAuthenticated ? /*#__PURE__*/React.createElement(Form, {\n    inline: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    className: \"navBtn\",\n    onClick: () => loginShow(true),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 15\n    }\n  }, \"Login\"), /*#__PURE__*/React.createElement(Button, {\n    className: \"navBtn\",\n    onClick: () => registerShow(true),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 15\n    }\n  }, \"Register\")) : /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Badge, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 15\n    }\n  }, \"Hello \", props.user.name), /*#__PURE__*/React.createElement(Button, {\n    className: \"navBtn\",\n    onClick: () => logOut(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 15\n    }\n  }, \"Logout\")))), /*#__PURE__*/React.createElement(Modal, {\n    show: show,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Modal.Header, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 9\n    }\n  }, \"Login\"), /*#__PURE__*/React.createElement(Modal.Body, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Form, {\n    onSubmit: e => loginFunc(e),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Form.Group, {\n    controlId: \"email\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Form.Label, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 15\n    }\n  }, \"Email\"), /*#__PURE__*/React.createElement(Form.Control, {\n    type: \"text\",\n    value: email,\n    onChange: e => setEmail(e.target.value),\n    id: \"email\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(Form.Group, {\n    controlId: \"password\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Form.Label, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 15\n    }\n  }, \"Password\"), /*#__PURE__*/React.createElement(Form.Control, {\n    type: \"text\",\n    value: password,\n    onChange: e => setPassword(e.target.value),\n    id: \"password\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(\"hr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(Button, {\n    onClick: () => loginShow(false),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 15\n    }\n  }, \"Cancel\"), /*#__PURE__*/React.createElement(Button, {\n    type: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 15\n    }\n  }, \"Login\"))))), /*#__PURE__*/React.createElement(Modal, {\n    show: showRegister,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Modal.Header, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 9\n    }\n  }, \"Register New Account\"), /*#__PURE__*/React.createElement(Modal.Body, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Form, {\n    onSubmit: e => registerFunc(e),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Form.Group, {\n    controlId: \"name\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Form.Label, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 15\n    }\n  }, \"User Name\"), /*#__PURE__*/React.createElement(Form.Control, {\n    type: \"text\",\n    value: name,\n    onChange: e => setName(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(Form.Group, {\n    controlId: \"email\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Form.Label, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 15\n    }\n  }, \"Email\"), /*#__PURE__*/React.createElement(Form.Control, {\n    type: \"text\",\n    value: email,\n    onChange: e => setEmail(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(Form.Group, {\n    controlId: \"password\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Form.Label, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 15\n    }\n  }, \"Password\"), /*#__PURE__*/React.createElement(Form.Control, {\n    type: \"text\",\n    value: password,\n    onChange: e => setPassword(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(\"hr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(Button, {\n    onClick: () => registerShow(false),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 15\n    }\n  }, \"Cancel\"), /*#__PURE__*/React.createElement(Button, {\n    type: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 15\n    }\n  }, \"Register\"))))));\n}","map":{"version":3,"sources":["/Users/derek/Desktop/project/JoinMe-fe-DerekLarm/src/components/Nav.js"],"names":["React","useState","Navbar","Button","Modal","Form","Badge","Joi","require","Nav","props","show","setShow","showRegister","setShowRegister","email","setEmail","name","setName","password","setPassword","schema","string","required","label","min","loginShow","e","registerShow","loginFunc","preventDefault","loginData","res","fetch","process","env","REACT_APP_API_URL","method","headers","body","JSON","stringify","data","json","localStorage","setItem","token","setUser","user","isAuthenticated","err","console","log","registerFunc","userData","newRegister","logOut","removeItem","window","location","reload","target","value"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport { Navbar, Button, Modal, Form, Badge } from \"react-bootstrap\";\nconst Joi = require(\"joi-browser\");\n\nexport default function Nav(props) {\n  const [show, setShow] = useState(null);\n  const [showRegister, setShowRegister] = useState(null);\n  const [email, setEmail] = useState(\"\");\n  const [name, setName] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n\n  const schema = {\n    email: Joi.string().required().email().label(\"Email\"),\n    password: Joi.string().required().min(5).label(\"Password\"),\n    name: Joi.string().required().min(5).label(\"Username\"),\n  };\n\n  const loginShow = async (e) => {\n    setShow(e);\n  };\n\n  const registerShow = (e) => {\n    setShowRegister(e);\n  };\n\n  const loginFunc = async (e) => {\n    e.preventDefault();\n    try {\n      const loginData = {\n        email,\n        password,\n      };\n      const res = await fetch(`${process.env.REACT_APP_API_URL}/auth`, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify(loginData),\n      });\n      const data = await res.json();\n      localStorage.setItem(\"token\", data.token);\n      props.setUser({ ...data.user, isAuthenticated: true });\n    } catch (err) {\n      console.log(err);\n    }\n\n    setShow(false);\n  };\n\n  const registerFunc = async (e) => {\n    e.preventDefault();\n    try {\n      const userData = {\n        name,\n        email,\n        password,\n      };\n      const loginData = {\n        email,\n        password,\n      };\n      console.log(userData);\n\n      const newRegister = await fetch(\n        `${process.env.REACT_APP_API_URL}/users`,\n        {\n          method: \"POST\",\n          headers: {\n            \"Content-Type\": \"application/json\",\n          },\n          body: JSON.stringify(userData),\n        }\n      );\n\n      const res = await fetch(`${process.env.REACT_APP_API_URL}/auth`, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify(loginData),\n      });\n      const data = await res.json();\n      localStorage.setItem(\"token\", data.token);\n      props.setUser({ ...data.user, isAuthenticated: true });\n      registerShow(false);\n    } catch (err) {\n      console.log(err);\n    }\n  };\n\n  const logOut = () => {\n    props.setUser({ isAuthenticated: false });\n    localStorage.removeItem(\"token\");\n    window.location.reload(true);\n  };\n\n  return (\n    <div>\n      <Navbar className=\"navBar\">\n        <div className=\"container\">\n          <Navbar.Brand className=\"navText\">\n            JoinMe<i class=\"fas fa-users\"></i>\n          </Navbar.Brand>\n          {!props.user.isAuthenticated ? (\n            <Form inline>\n              <Button className=\"navBtn\" onClick={() => loginShow(true)}>\n                Login\n              </Button>\n              <Button className=\"navBtn\" onClick={() => registerShow(true)}>\n                Register\n              </Button>\n            </Form>\n          ) : (\n            <div>\n              <Badge>Hello {props.user.name}</Badge>\n              <Button className=\"navBtn\" onClick={() => logOut()}>\n                Logout\n              </Button>\n            </div>\n          )}\n        </div>\n      </Navbar>\n\n      {/* EVENT LIST */}\n\n      {/* LOGIN */}\n      <Modal show={show}>\n        <Modal.Header>Login</Modal.Header>\n        <Modal.Body>\n          <Form onSubmit={(e) => loginFunc(e)}>\n            <Form.Group controlId=\"email\">\n              <Form.Label>Email</Form.Label>\n              <Form.Control\n                type=\"text\"\n                value={email}\n                onChange={(e) => setEmail(e.target.value)}\n                id=\"email\"\n              />\n            </Form.Group>\n            <Form.Group controlId=\"password\">\n              <Form.Label>Password</Form.Label>\n              <Form.Control\n                type=\"text\"\n                value={password}\n                onChange={(e) => setPassword(e.target.value)}\n                id=\"password\"\n              />\n              <hr></hr>\n              <Button onClick={() => loginShow(false)}>Cancel</Button>\n              <Button type=\"submit\">Login</Button>\n            </Form.Group>\n          </Form>\n        </Modal.Body>\n      </Modal>\n\n      {/* REGISTER */}\n      <Modal show={showRegister}>\n        <Modal.Header>Register New Account</Modal.Header>\n        <Modal.Body>\n          <Form onSubmit={(e) => registerFunc(e)}>\n            <Form.Group controlId=\"name\">\n              <Form.Label>User Name</Form.Label>\n              <Form.Control\n                type=\"text\"\n                value={name}\n                onChange={(e) => setName(e.target.value)}\n              />\n            </Form.Group>\n            <Form.Group controlId=\"email\">\n              <Form.Label>Email</Form.Label>\n              <Form.Control\n                type=\"text\"\n                value={email}\n                onChange={(e) => setEmail(e.target.value)}\n              />\n            </Form.Group>\n            <Form.Group controlId=\"password\">\n              <Form.Label>Password</Form.Label>\n              <Form.Control\n                type=\"text\"\n                value={password}\n                onChange={(e) => setPassword(e.target.value)}\n              />\n              <hr></hr>\n              <Button onClick={() => registerShow(false)}>Cancel</Button>\n              <Button type=\"submit\">Register</Button>\n            </Form.Group>\n          </Form>\n        </Modal.Body>\n      </Modal>\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}