{"ast":null,"code":"import _objectSpread from\"/Users/derek/Desktop/project/JoinMe-fe-DerekLarm/my-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"/Users/derek/Desktop/project/JoinMe-fe-DerekLarm/my-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/derek/Desktop/project/JoinMe-fe-DerekLarm/my-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/derek/Desktop/project/JoinMe-fe-DerekLarm/my-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from\"react\";import{Navbar,Button,Modal,Form}from\"react-bootstrap\";var Joi=require(\"joi-browser\");export default function Nav(props){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),show=_useState2[0],setShow=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),showRegister=_useState4[0],setShowRegister=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),email=_useState6[0],setEmail=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),name=_useState8[0],setName=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),password=_useState10[0],setPassword=_useState10[1];var schema={email:Joi.string().required().email().label(\"Email\"),password:Joi.string().required().min(5).label(\"Password\"),name:Joi.string().required().min(5).label(\"Username\")};var loginShow=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setShow(e);case 1:case\"end\":return _context.stop();}}},_callee);}));return function loginShow(_x){return _ref.apply(this,arguments);};}();var registerShow=function registerShow(e){setShowRegister(e);};var loginFunc=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e){var loginData,res,data;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:e.preventDefault();_context2.prev=1;loginData={email:email,password:password};_context2.next=5;return fetch(\"http://localhost:5000/auth\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(loginData)});case 5:res=_context2.sent;_context2.next=8;return res.json();case 8:data=_context2.sent;localStorage.setItem(\"token\",data.token);// todo: setState user object\nprops.setUser(_objectSpread(_objectSpread({},data.user),{},{isAuthenticated:true}));_context2.next=16;break;case 13:_context2.prev=13;_context2.t0=_context2[\"catch\"](1);console.log(_context2.t0);case 16:setShow(false);case 17:case\"end\":return _context2.stop();}}},_callee2,null,[[1,13]]);}));return function loginFunc(_x2){return _ref2.apply(this,arguments);};}();var registerFunc=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(e){var userData,newRegister;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:e.preventDefault();userData={name:name,email:email,password:password};// eslint-disable-next-line\n_context3.next=4;return fetch(\"http://localhost:5000/users\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(userData)});case 4:newRegister=_context3.sent;registerShow(false);case 6:case\"end\":return _context3.stop();}}},_callee3);}));return function registerFunc(_x3){return _ref3.apply(this,arguments);};}();var logOut=function logOut(){props.setUser({isAuthenticated:false});localStorage.removeItem(\"token\");window.location.reload(true);};return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Navbar,{className:\"navBar\"},/*#__PURE__*/React.createElement(\"div\",{className:\"container\"},/*#__PURE__*/React.createElement(Navbar.Brand,{className:\"navText\"},\"JoinMe\",/*#__PURE__*/React.createElement(\"i\",{class:\"fas fa-users\"})),!props.user.isAuthenticated?/*#__PURE__*/React.createElement(Form,{inline:true},/*#__PURE__*/React.createElement(Button,{className:\"navBtn\",onClick:function onClick(){return loginShow(true);}},\"Login\"),/*#__PURE__*/React.createElement(Button,{className:\"navBtn\",onClick:function onClick(){return registerShow(true);}},\"Register\")):/*#__PURE__*/React.createElement(Button,{className:\"navBtn\",onClick:function onClick(){return logOut();}},\"Logout\"))),/*#__PURE__*/React.createElement(Modal,{show:show},/*#__PURE__*/React.createElement(Modal.Header,null,\"Login\"),/*#__PURE__*/React.createElement(Modal.Body,null,/*#__PURE__*/React.createElement(Form,{onSubmit:function onSubmit(e){return loginFunc(e);}},/*#__PURE__*/React.createElement(Form.Group,{controlId:\"email\"},/*#__PURE__*/React.createElement(Form.Label,null,\"Email\"),/*#__PURE__*/React.createElement(Form.Control,{type:\"text\",value:email,onChange:function onChange(e){return setEmail(e.target.value);},id:\"email\"})),/*#__PURE__*/React.createElement(Form.Group,{controlId:\"password\"},/*#__PURE__*/React.createElement(Form.Label,null,\"Password\"),/*#__PURE__*/React.createElement(Form.Control,{type:\"text\",value:password,onChange:function onChange(e){return setPassword(e.target.value);},id:\"password\"}),/*#__PURE__*/React.createElement(\"hr\",null),/*#__PURE__*/React.createElement(Button,{onClick:function onClick(){return loginShow(false);}},\"Cancel\"),/*#__PURE__*/React.createElement(Button,{type:\"submit\"},\"Login\"))))),/*#__PURE__*/React.createElement(Modal,{show:showRegister},/*#__PURE__*/React.createElement(Modal.Header,null,\"Register New Account\"),/*#__PURE__*/React.createElement(Modal.Body,null,/*#__PURE__*/React.createElement(Form,{onSubmit:function onSubmit(e){return registerFunc(e);}},/*#__PURE__*/React.createElement(Form.Group,{controlId:\"name\"},/*#__PURE__*/React.createElement(Form.Label,null,\"User Name\"),/*#__PURE__*/React.createElement(Form.Control,{type:\"text\",value:name,onChange:function onChange(e){return setName(e.target.value);}})),/*#__PURE__*/React.createElement(Form.Group,{controlId:\"email\"},/*#__PURE__*/React.createElement(Form.Label,null,\"Email\"),/*#__PURE__*/React.createElement(Form.Control,{type:\"text\",value:email,onChange:function onChange(e){return setEmail(e.target.value);}})),/*#__PURE__*/React.createElement(Form.Group,{controlId:\"password\"},/*#__PURE__*/React.createElement(Form.Label,null,\"Password\"),/*#__PURE__*/React.createElement(Form.Control,{type:\"text\",value:password,onChange:function onChange(e){return setPassword(e.target.value);}}),/*#__PURE__*/React.createElement(\"hr\",null),/*#__PURE__*/React.createElement(Button,{onClick:function onClick(){return registerShow(false);}},\"Cancel\"),/*#__PURE__*/React.createElement(Button,{type:\"submit\"},\"Register\"))))));}","map":{"version":3,"sources":["/Users/derek/Desktop/project/JoinMe-fe-DerekLarm/my-app/src/components/Nav.js"],"names":["React","useState","Navbar","Button","Modal","Form","Joi","require","Nav","props","show","setShow","showRegister","setShowRegister","email","setEmail","name","setName","password","setPassword","schema","string","required","label","min","loginShow","e","registerShow","loginFunc","preventDefault","loginData","fetch","method","headers","body","JSON","stringify","res","json","data","localStorage","setItem","token","setUser","user","isAuthenticated","console","log","registerFunc","userData","newRegister","logOut","removeItem","window","location","reload","target","value"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport { Navbar, Button, Modal, Form } from \"react-bootstrap\";\nconst Joi = require(\"joi-browser\");\n\nexport default function Nav(props) {\n  const [show, setShow] = useState(null);\n  const [showRegister, setShowRegister] = useState(null);\n  const [email, setEmail] = useState(\"\");\n  const [name, setName] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n\n  const schema = {\n    email: Joi.string().required().email().label(\"Email\"),\n    password: Joi.string().required().min(5).label(\"Password\"),\n    name: Joi.string().required().min(5).label(\"Username\")\n  }\n\n  const loginShow = async (e) => {\n    setShow(e);\n  };\n\n  const registerShow = (e) => {\n    setShowRegister(e);\n  };\n\n  const loginFunc = async (e) => {\n    e.preventDefault();\n    try {\n      const loginData = {\n        email,\n        password,\n      };\n      const res = await fetch(\"http://localhost:5000/auth\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify(loginData),\n      });\n      const data = await res.json();\n      localStorage.setItem(\"token\", data.token);\n      // todo: setState user object\n      props.setUser({ ...data.user, isAuthenticated: true });\n    } catch (err) {\n      console.log(err);\n    }\n\n    setShow(false);\n  };\n\n  const registerFunc = async (e) => {\n    e.preventDefault();\n    const userData = {\n      name,\n      email,\n      password,\n    };\n    // eslint-disable-next-line\n    const newRegister = await fetch(\"http://localhost:5000/users\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify(userData),\n    });\n    registerShow(false);\n  };\n\n  const logOut = () => {\n    props.setUser({ isAuthenticated: false });\n    localStorage.removeItem(\"token\");\n    window.location.reload(true);\n  };\n\n  return (\n    <div>\n      <Navbar className=\"navBar\">\n        <div className=\"container\">\n          <Navbar.Brand className=\"navText\">\n            JoinMe<i class=\"fas fa-users\"></i>\n          </Navbar.Brand>\n          {!props.user.isAuthenticated ? (\n            <Form inline>\n              <Button className=\"navBtn\" onClick={() => loginShow(true)}>\n                Login\n              </Button>\n              <Button className=\"navBtn\" onClick={() => registerShow(true)}>\n                Register\n              </Button>\n            </Form>\n          ) : (\n            <Button className=\"navBtn\" onClick={() => logOut()}>\n              Logout\n            </Button>\n          )}\n        </div>\n      </Navbar>\n\n      {/* EVENT LIST */}\n\n      {/* LOGIN */}\n      <Modal show={show}>\n        <Modal.Header>Login</Modal.Header>\n        <Modal.Body>\n          <Form onSubmit={(e) => loginFunc(e)}>\n            <Form.Group controlId=\"email\">\n              <Form.Label>Email</Form.Label>\n              <Form.Control\n                type=\"text\"\n                value={email}\n                onChange={(e) => setEmail(e.target.value)}\n                id=\"email\"\n              />\n            </Form.Group>\n            <Form.Group controlId=\"password\">\n              <Form.Label>Password</Form.Label>\n              <Form.Control\n                type=\"text\"\n                value={password}\n                onChange={(e) => setPassword(e.target.value)}\n                id=\"password\"\n              />\n              <hr></hr>\n              <Button onClick={() => loginShow(false)}>Cancel</Button>\n              <Button type=\"submit\">Login</Button>\n            </Form.Group>\n          </Form>\n        </Modal.Body>\n      </Modal>\n\n      {/* REGISTER */}\n      <Modal show={showRegister}>\n        <Modal.Header>Register New Account</Modal.Header>\n        <Modal.Body>\n          <Form onSubmit={(e) => registerFunc(e)}>\n            <Form.Group controlId=\"name\">\n              <Form.Label>User Name</Form.Label>\n              <Form.Control\n                type=\"text\"\n                value={name}\n                onChange={(e) => setName(e.target.value)}\n              />\n            </Form.Group>\n            <Form.Group controlId=\"email\">\n              <Form.Label>Email</Form.Label>\n              <Form.Control\n                type=\"text\"\n                value={email}\n                onChange={(e) => setEmail(e.target.value)}\n              />\n            </Form.Group>\n            <Form.Group controlId=\"password\">\n              <Form.Label>Password</Form.Label>\n              <Form.Control\n                type=\"text\"\n                value={password}\n                onChange={(e) => setPassword(e.target.value)}\n              />\n              <hr></hr>\n              <Button onClick={() => registerShow(false)}>Cancel</Button>\n              <Button type=\"submit\">Register</Button>\n            </Form.Group>\n          </Form>\n        </Modal.Body>\n      </Modal>\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}